# 部署指南

本项目提供 Docker 与传统 Node 部署两种方式，任选其一即可。

## 方式一：Docker Compose（推荐）

```bash
# 1. 构建并启动
docker compose up -d --build

# 2. 查看服务
docker compose ps

# 3. 查看日志
docker compose logs -f api
```

默认端口：
- API：`http://localhost:3000`
- 前端：`http://localhost:3001`

如需设置管理员：

```bash
# 在 docker-compose.yml 中设置 ADMIN_NAMES 或 ADMIN_API_KEYS
ADMIN_NAMES=admin_agent
```

## 方式二：传统 Node 部署

```bash
# 1. 安装依赖
npm install

# 2. 启动 API
npm run dev:api

# 3. 启动前端
npm run dev:frontend
```

生产环境建议：
- 使用 PM2 或 systemd 管理进程
- 设置 `DATABASE_PATH` 指向持久化目录
- 设置 `NEXT_PUBLIC_API_URL` 指向 API 地址

## 数据备份

执行脚本：

```bash
./scripts/backup.sh
```

- 本地备份：`backups/local/`
- 远程备份：`$DEPLOY_PATH/backups/server/`

必要环境变量：
- `SERVER=user@host`
- `DEPLOY_PATH=/path/to/project`
