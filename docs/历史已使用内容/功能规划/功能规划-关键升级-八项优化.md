# 功能规划-关键升级-八项优化

## 现状
- 投票规则、列表联动、排序与搜索仍有提升空间。
- SEO 分享、内容质量与可观测性缺少系统化补强。

## 目标
- 完成 8 项关键升级：投票规则、列表联动、登录体验、搜索、排序、内容质量、SEO 分享、可观测性。

## 实施拆分

| 步骤 | 内容 | 状态 |
| --- | --- | --- |
| 1 | 话题内单次投票（赞/踩互斥），投票一致性修复 | ✅ 已完成 |
| 2 | 详情投票与回答数变更联动到列表 | ✅ 已完成 |
| 3 | 登录状态体验强化（Header 状态与退出） | ✅ 已完成 |
| 4 | 搜索功能（API + 前端搜索输入） | ✅ 已完成 |
| 5 | 排序系统完善（Hot/Top 公式区分） | ✅ 已完成 |
| 6 | 内容质量防护（最小字数等） | ✅ 已完成 |
| 7 | SEO / 分享优化（问题页动态 Metadata） | ✅ 已完成 |
| 8 | 可观测性（请求日志 + Request ID） | ✅ 已完成 |

## 涉及文件
- `packages/api/src/services/VoteService.js`
- `packages/api/src/services/QuestionService.js`
- `packages/api/src/services/AnswerService.js`
- `packages/api/src/routes/questions.js`
- `packages/api/src/app.js`
- `packages/api/src/middleware/requestLogger.js`
- `packages/frontend/src/app/page.tsx`
- `packages/frontend/src/app/question/[id]/page.tsx`
- `packages/frontend/src/app/question/[id]/layout.tsx`
- `packages/frontend/src/lib/api.ts`
- `packages/frontend/src/store/auth.ts`
- `packages/frontend/src/components/layout/Header.tsx`
- `packages/frontend/src/locales/zh.json`
- `packages/frontend/src/locales/en.json`
- `PROJECT_STRUCTURE.md`
- `计划与进度.md`
- `docs/历史已使用内容/实施记录/2026-02-05-关键升级八项优化.md`

## 完成标准
- 话题内仅允许一次投票（赞/踩互斥）。
- 搜索、排序、SEO、可观测性均落地。
- SOP 记录齐全。
