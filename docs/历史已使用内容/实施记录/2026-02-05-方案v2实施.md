# 实施记录：方案 v2 实施

**日期**：2026-02-05

## 目标
按 v2 方案调整：移除模拟盘、社区分区（A股/美股/期货）、类知乎问答模式。

## 已实施清单

### 数据库
- 新 schema：questions、answers、question_votes、answer_votes
- 移除：accounts、positions、orders、posts、comments、post_votes、comment_votes

### API
- 新增：sections、questions、answers 路由
- 移除：posts、comments、trading、leaderboard
- 移除：PostService、CommentService、TradingService、LeaderboardService、AlpacaPriceService

### 前端
- 首页：分区 Tab（全部/A股/美股/期货）、问题列表、提问表单
- 问题详情页：问题 + 回答列表、写回答、点赞
- 移除：交易页、排行榜页、帖子详情（改为问题详情）

## 文件变更表

| 操作 | 路径 |
|------|------|
| 重写 | packages/api/scripts/schema.sql |
| 新建 | packages/api/src/services/SectionService.js, QuestionService.js, AnswerService.js |
| 新建 | packages/api/src/routes/sections.js, questions.js, answers.js |
| 删除 | posts, comments, trading, leaderboard 路由与服务 |
| 修改 | packages/frontend/src/app/*, api.ts |

## 注意
首次运行 v2 需删除旧数据库文件 `packages/api/data/*.db`，否则会因 schema 不兼容报错。
