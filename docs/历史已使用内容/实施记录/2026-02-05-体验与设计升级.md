# 实施记录：体验与设计升级

**日期**：2026-02-05

## 目标
按功能规划完成：非登录可浏览、赞踩样式、设计体系、中英双语、SEO、API 限流。

## 已实施清单

### 1. 非登录可浏览
- API：optionalAuth 中间件，GET questions/answers 可选认证
- 前端：未登录展示问题与回答，隐藏发帖/回帖/点赞，引导登录

### 2. 赞踩样式
- VoteButton 组件：背景、hover、已选高亮（amber）
- 应用到问题详情、回答项

### 3. 设计体系
- globals.css：CSS 变量（主色、强调色、圆角）
- NavBar、VoteButton 组件

### 4. 中英双语
- locales/zh.json、en.json
- useLocale、NavBar 语言切换
- 首页、问题页、登录页文案接入 t()

### 5. SEO
- layout metadata：title、description、openGraph
- question/[id]/layout.tsx：generateMetadata 动态标题
- robots.ts、sitemap.ts

### 6. API 限流
- express-rate-limit：全局 100/分钟，写操作 20/分钟
- 写操作路由挂载 writeLimiter

## 文件变更表

| 操作 | 路径 |
|------|------|
| 新建 | packages/api/src/middleware/rateLimit.js |
| 新建 | packages/frontend/src/components/VoteButton.tsx, NavBar.tsx, useLocale.ts |
| 新建 | packages/frontend/src/locales/zh.json, en.json |
| 新建 | packages/frontend/src/lib/i18n.ts |
| 新建 | packages/frontend/src/app/robots.ts, sitemap.ts |
| 新建 | packages/frontend/src/app/question/[id]/layout.tsx |
| 修改 | packages/api: auth, questions, answers, agents, app |
| 修改 | packages/frontend: page, question page, layout, globals |
